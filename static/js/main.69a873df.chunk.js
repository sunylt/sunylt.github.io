(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{149:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(31),r=a.n(c),i=(a(86),a(66)),o=a(67),s=a(78),u=a(68),E=a(79),m=a(151),d=a(152),h=(a(87),m.a.TabPane,{50497:"AE",3756934:"LEND",9490820:"KEY",9622452:"LET",49681:"SNT",1712771:"FUEL",8520497:"MTX",6771938:"DEW",49653:"BTC"}),p=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={isLoading:!1,priceList:{},records:[],mode:"top"},a.filterData=function(e){var t=a.state.records;!1!==t[e][4]?t[e][4]=!1:t[e][4]=!0,a.setState({records:t})},a.checkAll=function(){var e=a.state.records;e.forEach(function(e){e[4]=!0}),a.setState({records:e})},a.onChang=function(e){var t=e.target.value;a.setState({mode:t})},a}return Object(E.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.fetchExchangeRecords().then(function(t){var a=t.data;localStorage.setItem("data",JSON.stringify(a)),e.setState({records:a}),e.syncTicker()}),this.handleKeyboard()}},{key:"handleKeyboard",value:function(){var e=this;document.body.addEventListener("keydown",function(t){16===t.which&&(e.multiAction=!0)}),document.body.addEventListener("keyup",function(t){16===t.which&&(e.multiAction=!1)})}},{key:"syncTicker",value:function(e){var t=this,a=new WebSocket("wss://ws.cn-east.mytokenapi.com/ticker");a.onmessage=function(e){var a=JSON.parse(e.data).data;if(a&&a.tick){var n=t.state.priceList;n[a.tick.symbol]={price:a.tick.price,change:a.tick.percent_change_24h},t.setState({priceList:n})}},a.onopen=function(){a.send(JSON.stringify({event:"ticker",params:{ids:Object.keys(h).map(function(e){return+e})}}))}}},{key:"fetchExchangeRecords",value:function(){return fetch("https://www.easy-mock.com/mock/59d892fd9d342f449f303370/app/records").then(function(e){return e.json()})}},{key:"render",value:function(){var e=this,t=this,a=this.state,n=a.priceList,c=a.records,r=a.mode,i=0,o={};c.forEach(function(e,t){if(!1!==e[4]&&(i+=parseInt(e[1]),e[2])){var a=e[2].split(/\d+/),n=a[1],l=parseInt(e[2]);"undefined"===typeof o[n]?o[n]=l:o[n]=o[n]+l,0===o[n]&&c.forEach(function(e,n){var l=e[2].split(/\d+/);n<=t&&a[1]===l[1]&&(e.completed=!0)})}});var s=0,u=c.map(function(e,a){var c=e[2].split(/\d+/)[1],r=parseInt(e[2]),i="";n[c]&&n.AE&&(i=parseInt(Math.abs(r)*n[c].price/n.AE.price));var o=i&&!e.completed?(e[1]<0&&i-Math.abs(e[1])>0?"+":"")+(i-Math.abs(e[1])):"";return o&&(s+=parseInt(o)),l.a.createElement("tr",{key:a},l.a.createElement("td",null,e[0]),l.a.createElement("td",null,e[1]),l.a.createElement("td",{title:i?"\u2248".concat(i,"AE"):""},e[2]),l.a.createElement("td",null,l.a.createElement("span",{style:{paddingLeft:"3px",color:e[1]<0&&i-Math.abs(e[1])>0?"#70a700":"#ea2870"}},o),l.a.createElement(f,{checked:!1!==e[4],onClick:function(){return t.filterData(a)}})),l.a.createElement("td",null,e[3]))}),E=0,m=0,h=0;Object.keys(o).forEach(function(t){o[t]>0&&(h+=1,e.state.priceList[t]&&(E+=o[t]*e.state.priceList[t].price,m+=1))});var p=m===h,w=n.AE&&p;return window.assetsExchanged=o,window.records=c,l.a.createElement("div",{className:"App"},l.a.createElement("div",{className:"App-header"},l.a.createElement(d.a.Group,{size:"large",onChange:this.onChang,value:r,style:{marginBottom:8}},l.a.createElement(d.a.Button,{value:"top"},"\u5386\u53f2"),l.a.createElement(d.a.Button,{value:"left"},"\u8d44\u4ea7"))),l.a.createElement("div",{className:"container"},"top"===r?l.a.createElement("table",{border:"0",cellPadding:"0",cellSpacing:"0",width:"88%",align:"center",className:"exchange-list"},l.a.createElement("colgroup",null,l.a.createElement("col",null),l.a.createElement("col",null),l.a.createElement("col",null),l.a.createElement("col",null),l.a.createElement("col",null)),l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"18%"},"DATE"),l.a.createElement("th",{width:"20%"},"AE"),l.a.createElement("th",{width:"20%"},"TO TOKEN"),l.a.createElement("th",{width:"22%"},"CK ALL",l.a.createElement(f,{checked:!0,onClick:this.checkAll})),l.a.createElement("th",{width:"20%"},"NOTE"))),l.a.createElement("tbody",null,u,l.a.createElement("tr",null,l.a.createElement("td",null,"SUM"),l.a.createElement("td",{className:"ae-total"},l.a.createElement("b",null,i)," AE"),l.a.createElement("td",null,l.a.createElement("b",null,w?parseInt(E/n.AE.price):l.a.createElement(k,null))," AE"),l.a.createElement("td",null,l.a.createElement("b",null,w?i+parseInt(E/n.AE.price)+" ("+s+")":l.a.createElement(k,null))," AE"),l.a.createElement("td",null)))):l.a.createElement("table",{border:"0",cellPadding:"0",cellSpacing:"0",width:"88%",align:"center",className:"exchangedAssets"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"18%"},"TOKEN"),l.a.createElement("th",{width:"20%"},"CHANGE(24H)"),l.a.createElement("th",{width:"20%"},"PRICE"),l.a.createElement("th",{width:"22%"},"AMOUNT"),l.a.createElement("th",{width:"20%"},"BANLANCE"))),l.a.createElement("tbody",null,Object.keys(o).map(function(e){return o[e]>0?l.a.createElement("tr",{key:e},l.a.createElement("td",null,e),l.a.createElement("td",null,n[e]?l.a.createElement(v,{price:n[e].change}):l.a.createElement(k,null)),l.a.createElement("td",null,n[e]?"\uffe5"+n[e].price.toFixed(5):l.a.createElement(k,null)),l.a.createElement("td",null,o[e]),l.a.createElement("td",null,n[e]?"\uffe5"+parseInt(n[e].price.toFixed(5)*o[e]):l.a.createElement(k,null))):null}),l.a.createElement("tr",null,l.a.createElement("td",null,"AE"),l.a.createElement("td",null,n.AE?l.a.createElement(v,{price:n.AE.change}):l.a.createElement(k,null)),l.a.createElement("td",null,n.AE?"\uffe5"+n.AE.price.toFixed(5):l.a.createElement(k,null)),l.a.createElement("td",null,i),l.a.createElement("td",null,n.AE?"\uffe5"+parseInt(n.AE.price.toFixed(5)*i):l.a.createElement(k,null)))))))}}]),t}(n.Component),f=function(e){var t=e.checked,a=e.onClick,n=void 0===a?function(){}:a;return t?l.a.createElement("span",{className:"ui-checkbox",select:"true",onClick:n}):l.a.createElement("span",{className:"ui-checkbox",onClick:n})},v=function(e){var t=e.price;return l.a.createElement("span",{style:{color:+t<0?"#ea2870":"#70a700"}},t,"%")},k=function(){return l.a.createElement("div",{className:"loadEffect"},l.a.createElement("span",null),l.a.createElement("span",null),l.a.createElement("span",null),l.a.createElement("span",null),l.a.createElement("span",null),l.a.createElement("span",null),l.a.createElement("span",null),l.a.createElement("span",null))},w=p;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},81:function(e,t,a){e.exports=a(149)},86:function(e,t,a){},87:function(e,t,a){}},[[81,1,2]]]);
//# sourceMappingURL=main.69a873df.chunk.js.map