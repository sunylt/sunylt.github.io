(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{162:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),l=a(4),r=a.n(l),i=(a(97),a(76)),o=a(77),s=a(89),u=a(78),m=a(90),E=a(164),d=a(165),h=(a(98),E.a.Option),p={50497:"AE",3756934:"LEND",9490820:"KEY",9622452:"LET",49681:"SNT",1712771:"FUEL",8520497:"MTX",6771938:"DEW",49653:"BTC"},f=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={isLoading:!1,priceList:{},records:[],rate:[],current:"FULE",mode:localStorage.getItem("tabCurrent")||"a"},a.handleChange=function(e){a.fetchKlineData(e)},a.filterData=function(e){var t=a.state.records;!1!==t[e][4]?t[e][4]=!1:t[e][4]=!0,a.setState({records:t})},a.checkAll=function(){var e=a.state.records;e.forEach(function(e){e[4]=!0}),a.setState({records:e})},a.onChang=function(e){var t=e.target.value;a.setState({mode:t}),localStorage.setItem("tabCurrent",t)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("data"),a=localStorage.getItem("priceList");t&&this.setState({records:JSON.parse(t)}),a&&this.setState({priceList:JSON.parse(a)}),this.fetchExchangeRecords().then(function(t){var a=t.data;localStorage.setItem("data",JSON.stringify(a)),e.setState({records:a}),e.syncTicker()}),this.handleKeyboard(),this.fetchKlineData()}},{key:"fetchKlineData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"6h",t=this;this.fethHistoryPrice("FUELBTC",e).then(function(a){t.fethHistoryPrice("AEBTC",e).then(function(e){var n=[];e.forEach(function(e,t){var c=new Date(e[0]),l="".concat(c.getFullYear(),"-").concat(c.getMonth()+1,"-").concat(c.getDate()," ").concat(c.getHours(),":").concat(c.getMinutes());n.push({time:l,rate:parseInt(24e3*e[1]/a[t][1]),ae:e,fuel:a[t]})}),t.setState({rate:n})})})}},{key:"handleKeyboard",value:function(){var e=this;document.body.addEventListener("keydown",function(t){16===t.which&&(e.multiAction=!0)}),document.body.addEventListener("keyup",function(t){16===t.which&&(e.multiAction=!1)})}},{key:"syncTicker",value:function(e){var t=this,a=new WebSocket("wss://ws.cn-east.mytokenapi.com/ticker");a.onmessage=function(e){var a=JSON.parse(e.data).data;if(a&&a.tick){var n=t.state.priceList;n[a.tick.symbol]={price:a.tick.price,change:a.tick.percent_change_24h},t.setState({priceList:n}),localStorage.setItem("priceList",JSON.stringify(n))}},a.onopen=function(){a.send(JSON.stringify({event:"ticker",params:{ids:Object.keys(p).map(function(e){return+e})}}))}}},{key:"fetchExchangeRecords",value:function(){return fetch("https://www.easy-mock.com/mock/59d892fd9d342f449f303370/app/records").then(function(e){return e.json()})}},{key:"fetchHistoryFuelToBtcPrice",value:function(){return fetch("https://www.easy-mock.com/mock/59d892fd9d342f449f303370/app/fuelbtc").then(function(e){return e.json()})}},{key:"fethHistoryPrice",value:function(e,t){var a="1d"==t||"1D"==t?24:parseInt(t),n=new Date,c=new Date(n.getFullYear()+"/"+(n.getMonth()+1)+"/"+n.getDate()).getTime();return fetch("https://api.webmooc.com:5060/api/v1/klines?symbol="+e+"&interval="+t+"&limit=365&startTime="+(c-365*a*3600*1e3)+"&endTime="+c).then(function(e){return e.json()})}},{key:"fetchHistoryAeToBtcPrice",value:function(){return fetch("https://www.easy-mock.com/mock/59d892fd9d342f449f303370/app/aebtc").then(function(e){return e.json()})}},{key:"render",value:function(){var e=this,t=this,a=this.state,l=a.priceList,r=a.records,i=a.mode,o=a.rate,s=0,u={};r.forEach(function(e,t){if(!1!==e[4]&&(s+=parseInt(e[1]),e[2])){var a=e[2].split(/\d+/),n=a[1],c=parseInt(e[2]);"undefined"===typeof u[n]?u[n]=c:u[n]=u[n]+c,0===u[n]&&r.forEach(function(e,n){var c=e[2].split(/\d+/);n<=t&&a[1]===c[1]&&(e.completed=!0)})}});var m=0,p=r.map(function(e,a){var n=e[2].split(/\d+/)[1],r=parseInt(e[2]),i="";l[n]&&l.AE&&(i=parseInt(Math.abs(r)*l[n].price/l.AE.price));var o=i&&!e.completed?(e[1]<0&&i-Math.abs(e[1])>0?"+":"")+(i-Math.abs(e[1])):"";return o&&(m+=parseInt(o)),c.a.createElement("tr",{key:a},c.a.createElement("td",null,e[0]),c.a.createElement("td",null,e[1]),c.a.createElement("td",{title:i?"\u2248".concat(i,"AE"):""},e[2]),c.a.createElement("td",null,c.a.createElement("span",{style:{paddingLeft:"3px",color:e[1]<0&&i-Math.abs(e[1])>0?"#70a700":"#ea2870"}},o),c.a.createElement(w,{checked:!1!==e[4],onClick:function(){return t.filterData(a)}})),c.a.createElement("td",null,e[3]))}),f=0,v=0,A=0;Object.keys(u).forEach(function(t){u[t]>0&&(A+=1,e.state.priceList[t]&&(f+=u[t]*e.state.priceList[t].price,v+=1))});var L=v===A,N=l.AE&&L;return window.priceList=l,window.assetsExchanged=u,window.records=r,p.reverse(),c.a.createElement("div",{className:"App"},c.a.createElement("div",{className:"App-header"},c.a.createElement(d.a.Group,{onChange:this.onChang,value:i},c.a.createElement(d.a.Button,{value:"a"},"\u884c\u60c5"),c.a.createElement(d.a.Button,{value:"b"},"\u64cd\u4f5c"))),c.a.createElement("div",{className:"container"},"a"===i?c.a.createElement(n.Fragment,null,c.a.createElement("table",{border:"0",cellPadding:"0",cellSpacing:"0",width:"88%",align:"center",className:"exchangedAssets"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{width:"18%"},"TOKEN"),c.a.createElement("th",{width:"20%"},"CHANGE(24H)"),c.a.createElement("th",{width:"20%"},"PRICE"),c.a.createElement("th",{width:"22%"},"AMOUNT"),c.a.createElement("th",{width:"20%"},"BANLANCE"))),c.a.createElement("tbody",null,Object.keys(u).map(function(e){return u[e]>0?c.a.createElement("tr",{key:e},c.a.createElement("td",null,e),c.a.createElement("td",null,l[e]?c.a.createElement(n.Fragment,null,c.a.createElement(y,{price:l[e].change}),"%"):c.a.createElement(b,null)),c.a.createElement("td",null,l[e]?"\uffe5"+l[e].price.toFixed(5):c.a.createElement(b,null)),c.a.createElement("td",null,u[e]),c.a.createElement("td",null,l[e]?"\uffe5"+parseInt(l[e].price.toFixed(5)*u[e]):c.a.createElement(b,null))):null}),c.a.createElement("tr",null,c.a.createElement("td",null,"AE"),c.a.createElement("td",null,l.AE?c.a.createElement(n.Fragment,null,c.a.createElement(y,{price:l.AE.change}),"%"):c.a.createElement(b,null)),c.a.createElement("td",null,l.AE?"\uffe5"+l.AE.price.toFixed(5):c.a.createElement(b,null)),c.a.createElement("td",null,s),c.a.createElement("td",null,l.AE?"\uffe5"+parseInt(l.AE.price.toFixed(5)*s):c.a.createElement(b,null))))),c.a.createElement(E.a,{defaultValue:"6h",style:{width:120,marginTop:10,marginBottom:10},onChange:t.handleChange},c.a.createElement(h,{value:"1h"},"1\u5c0f\u65f6"),c.a.createElement(h,{value:"2h"},"2\u5c0f\u65f6"),c.a.createElement(h,{value:"4h"},"4\u5c0f\u65f6"),c.a.createElement(h,{value:"6h"},"6\u5c0f\u65f6"),c.a.createElement(h,{value:"12h"},"12\u5c0f\u65f6"),c.a.createElement(h,{value:"1d"},"1\u5929")),c.a.createElement("div",{id:"mountNode"},o.map(function(e,t){return c.a.createElement(g,{key:t,value:e.rate,time:e.time,data:{ae:e.ae,fuel:e.fuel}})}),c.a.createElement("div",{className:"data-detail",ref:"detail"})),c.a.createElement("div",{className:"changes-list"},c.a.createElement(k,{priceList:l,token:"FUEL"}),c.a.createElement(k,{priceList:l,token:"LEND"}),c.a.createElement(k,{priceList:l,token:"SNT"}),c.a.createElement(k,{priceList:l,token:"KEY"}))):c.a.createElement("table",{border:"0",cellPadding:"0",cellSpacing:"0",width:"88%",align:"center",className:"exchange-list"},c.a.createElement("colgroup",null,c.a.createElement("col",null),c.a.createElement("col",null),c.a.createElement("col",null),c.a.createElement("col",null),c.a.createElement("col",null)),c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{width:"18%"},"DATE"),c.a.createElement("th",{width:"20%"},"AE"),c.a.createElement("th",{width:"20%"},"TOKEN"),c.a.createElement("th",{width:"22%"},"CHECK",c.a.createElement(w,{checked:!0,onClick:this.checkAll})),c.a.createElement("th",{width:"20%"},"NOTE"))),c.a.createElement("tbody",null,p)),c.a.createElement("div",{className:"status-bar"},c.a.createElement("span",{className:"ae-total"},c.a.createElement("b",null,s)," AE"),c.a.createElement("span",null,c.a.createElement("b",null,N?s+parseInt(f/l.AE.price):c.a.createElement(b,null))," AE"),c.a.createElement("span",null,c.a.createElement("b",null,N?c.a.createElement(n.Fragment,null,c.a.createElement(y,{price:m})):c.a.createElement(b,null))," AE"))))}}]),t}(n.Component),v=null,g=function(e){var t=e.value,a=e.time,n=e.data,l=100*t/1e6,r=new Date(n.ae[0]);return c.a.createElement("div",{style:{height:l},time:a,onClick:function(e){console.log(n),v&&(v.style.backgroundColor=""),e.target.style.backgroundColor="red",v=e.target,document.querySelector(".data-detail").innerHTML="\n      <p>".concat(r.getFullYear(),"/").concat(r.getMonth()+1,"/").concat(r.getDate(),"</p>\n      <p>AE/BTC: ").concat(n.ae[1],"</p>\n      <p>FUEL/BTC: ").concat(n.fuel[1],"</p>\n      <p>24000 AE \u2248 ").concat(parseInt(24e3*n.ae[1]/n.fuel[1])," FUEL</p>\n      ")}})},k=function(e){var t=e.priceList,a=e.token;return c.a.createElement("div",null,"24000 AE \u2248 ",c.a.createElement("span",null,t.AE&&t[a]?parseInt(24e3*t.AE.price/t[a].price):c.a.createElement(b,null)),a)},w=function(e){var t=e.checked,a=e.onClick,n=void 0===a?function(){}:a;return t?c.a.createElement("span",{className:"ui-checkbox",select:"true",onClick:n}):c.a.createElement("span",{className:"ui-checkbox",onClick:n})},y=function(e){var t=e.price;return c.a.createElement("span",{style:{color:+t<0?"#ea2870":"#70a700"}},t)},b=function(){return c.a.createElement("div",{className:"loadEffect"},c.a.createElement("span",null),c.a.createElement("span",null),c.a.createElement("span",null),c.a.createElement("span",null),c.a.createElement("span",null),c.a.createElement("span",null),c.a.createElement("span",null),c.a.createElement("span",null))},A=f;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},92:function(e,t,a){e.exports=a(162)},97:function(e,t,a){},98:function(e,t,a){}},[[92,1,2]]]);
//# sourceMappingURL=main.6bae686b.chunk.js.map